---
title: ActivityPub
---

An ActivityPub model refers to all the django [model
classes](https://docs.djangoproject.com/en/stable/topics/db/models/)
that map to the Activity Streams/ActivityPub [core
types](https://www.w3.org/TR/activitystreams-core/).

There are two primary base types for ActivityPub: `Object` and `Link`.
Considering that all the other types (`Activity`, `Actor`,
`Collection`) are subtypes of `Object`, we have the following Django
model classes:

### CoreType

At the root we have the "CoreType" model. This model contains nothing
but the internal identifier for the resource - i.e, **not** its URI.
This class is defined to be able to represent relationships to objects
that can be represented by either one of `Object` or `Link`

### BaseActivityStreamsObject

This model is not abstract, but it is used mostly to allow us to
define the subtypes of `Object`. You won't be using this class
directly most of the time.

#### [Object](https://www.w3.org/TR/activitystreams-core/#object)

The type attribute is one choice defined by the `Object.Types` enum class, where each value map to the Activity Streams types (e.g, `Note`, `Image`, `Video`, `Question`, etc...).

```python

>>> from activitypub.models import Object

>>> my_note = Object(type=Object.Types.NOTE, content='Writing good documentation is an art that I am yet to master')
>>> my_note.save()

>>> print(my_note.type)

https://www.w3.org/ns/activitystreams#Note

```

#### [Actor](https://www.w3.org/TR/activitystreams-core/#actors)

Actors are the entities that carry out activities. They also are a
subtype of [`BaseActivityStreamsObject`][activitypub.models.BaseActivityStreamsObject] and can be of type
`Person`,`Group`, `Service`, `Application`, etc.

```python
>>> from activitypub.models import Actor

>>> my_bot = Actor.objects.filter(type=Actor.Types.SERVICE).first()

>>> print(my_bot.name)

'My bot'

```

#### [Activity](https://www.w3.org/TR/activitystreams-core/#activities)

Activities are the actions executed by the actors. They are also a
subtype of
[`BaseActivityStreamsObject`][activitypub.models.BaseActivityStreamsObject]
and its types map to all the possible types of activities (eg.
`Follow`, `Create`, `Delete`, `Accept`, etc...)

```python
>>> from activitypub.models import Activity


activity = Activity.objects.create(actor=my_bot, type=Activity.Types.CREATE, object=my_note)


```

#### [Collection](https://www.w3.org/TR/activitystreams-core/#collections)

Collections are containers for other
[`Object`][activitypub.models.Object] or
[`Link`][activitypub.models.Link] resources. They can be of type
`Collection` or `OrderedCollection`. The collection has a many-to-many
relationship to `CollectionItem`.

If the collection is set with `is_ordered`, then all items in the
collections will be listed in the order they were added to the
collection (reverse-chronologically), and it will be of type
`as:OrderedCollection`, If the list is not ordered, then the items
will be listed by the order of the "order" attribute.

#### [Collection Page](https://www.w3.org/TR/activitystreams-core/#collections)

Collection Pages are also containers for other
[`Object`][activitypub.models.Object] or
[`Link`][activitypub.models.Link] resources, but which should be seen
as a 'slice' of the Collection. They can be of type `CollectionPage`
or `OrderedCollectionPage` and also have a many-to-many relationship
to `CollectionItem`. They are used when the collection itself can grow
too too large - e.g, an outbox containing thousands of activities from
an actor).

Collection Pages are first-class models in ActivityPub Toolkit. They
are not just artificial constructs to have a paginated view of the
collection items at the view layer. As such, collections should not
have collection items directly assigned to them if they are meant to
be part of the paginated view.

### [Link](https://www.w3.org/TR/activitystreams-core/#link)

A Link describes a qualified, indirect reference to another `CoreType`
record.


### Reference

A Reference model is used to store URIs. Any instance of `BaseActivityStreamsObject` *may* contain its reference.

Having reference records separate from its models allows us to process
JSON-LD documents that have no real information about the object
except its URI. A reference with a valid URI can be fetched and
*resolved* to its underlying object.

### Cryptographic Key Pair

The keypair is provided by any actor that needs to authenticate the
messages that it sends. Keys are usually referenced by its "key id"

Actors that are controlled by the server application (i.e, its URI is
from a local [Domain](./domains.md) can have keypairs
generated by the server.
